!function(define,window){"use strict";define("Desole",[],function(){function Desole(config){this.url=config.url,this.tags=config.tags||{},this.ignore=config.ignore||[],this.modules=config.modules||["onerror","console","unhandledrejection"],this.app={name:config.app&&config.app.name||window&&window.location&&window.location.hostname,version:config.app&&config.app.version||!1,stage:config.app&&config.app.stage||!1},config.manualInit||this.attach()}return Desole.prototype.attach=function(){var self=this;-1<self.modules.indexOf("onerror")&&(self._originalOnError=window&&window.onerror,window.onerror=function(message,url,lineNo,columnNo,err){self.track({severity:"error",stack:err.stack||String(err),type:err.name,message:message||String(err)}),self._originalOnError&&self._originalOnError(window,[message,url,lineNo,columnNo,err])}),-1<self.modules.indexOf("console")&&(self._originalConsoleError=console&&console.error,console.error=function(){var args=Array.prototype.slice.call(arguments);self.track({severity:"info",stack:args.join(", "),type:"ConsoleError",message:args.join(", ")}),self._originalConsoleError.apply(this,arguments)}),-1<self.modules.indexOf("unhandledrejection")&&(self._originalUnhandledRejection=window.onunhandledrejection,window.onunhandledrejection=function(err){self.track({severity:"warning",stack:"",type:err.type||"UnhandledPromiseRejection",message:err.reason}),self._originalUnhandledRejection&&self._originalUnhandledRejection.apply(this,arguments)})},Desole.prototype.dettach=function(){-1<this.modules.indexOf("onerror")&&(window.onerror=this._originalOnError),-1<this.modules.indexOf("console")&&(console.error=this._originalConsoleError),-1<this.modules.indexOf("unhandledrejection")&&(window.onunhandledrejection=this._originalUnhandledRejection)},Desole.prototype.track=function(clientOptions){var options={severity:clientOptions.severity,stack:clientOptions.stack,type:clientOptions.type,message:clientOptions.message,timestamp:clientOptions.timestamp||Date.now(),resource:clientOptions.resource||window&&window.location&&window.location.href,app:{name:clientOptions.app&&clientOptions.app.name||this.app.name,version:clientOptions.app&&clientOptions.app.version||this.app.version,stage:clientOptions.app&&clientOptions.app.stage||this.app.stage},endpoint:{id:clientOptions.endpoint&&clientOptions.endpoint.id||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}),language:clientOptions.endpoint&&clientOptions.endpoint.language||window.navigator&&window.navigator.language,platform:clientOptions.endpoint&&clientOptions.endpoint.platform||window.navigator&&window.navigator.platform},tags:clientOptions.tags||this.tags},http=new window.XMLHttpRequest,url=this.url;http.open("POST",url,!0),http.setRequestHeader("Content-type","application/json"),http.send(JSON.stringify(options))},Desole.prototype.captureException=function(e){return this.track({severity:"error",stack:e.stack,type:e.name,message:e.message})},Desole})}("function"==typeof define&&define.amd?function(name,dependencies,factory){"use strict";define(dependencies,factory)}:"function"==typeof require&&"undefined"!=typeof module&&module.exports?function(name,dependencies,factory){"use strict";module.exports=factory.apply(this,dependencies.map(require))}:function(name,dependencies,factory){"use strict";for(var mod,dependency,i=0,global=window,old=global[name];dependency=dependencies[i];)dependencies[i++]=this[dependency];global[name]=mod=factory.apply(global,dependencies),mod.noConflict=function(){return global[name]=old,mod}},this);